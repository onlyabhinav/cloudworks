import hudson.model.*

// Get current build
def build = Thread.currentThread().executable
def resolver = build.buildVariableResolver

// Read parameters
def ticketId = resolver.resolve('TICKET_ID') ?: 'NO-TICKET'
def environment = resolver.resolve('ENVIRONMENT') ?: 'DEV'
def version = resolver.resolve('VERSION') ?: '1.0.0'

// Set description
build.setDescription("${ticketId} | ${environment} | v${version}")

println "Build description set: ${ticketId} | ${environment}"



==============================

// Get build object explicitly
def jenkins = Jenkins.getInstance()
def jobName = System.getenv('JOB_NAME')
def buildNumber = System.getenv('BUILD_NUMBER') as Integer

def job = jenkins.getItemByFullName(jobName)
def build = job.getBuildByNumber(buildNumber)

println "Found build: #${build.number}"
